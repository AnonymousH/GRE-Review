

### 2015

- **题目描述**

&emsp;&emsp;有A、B两人通过信箱进行辩论，每个人都从自己的信箱中取得对方的问题，将答案和向对方提出的新问题组成一个邮件放入对方的信箱中。假设A的信箱最多放$M$个邮件，B的信箱最多放$N$个邮件。初始时A的信箱中有$x$个邮件($0 < x <M$)，B的信箱中有$y$个邮件($0 < y < N$)。辩论者每取出一个邮件，邮件数减1。A和B两人的操作描述如下：

<img src="C:\Users\HP\Desktop\操作系统\2015.png" alt="2015" style="zoom:80%;" />

&emsp;&emsp;当信箱不为空时，辩论者才能从信箱中取邮箱，否则等待。当信箱不满时，辩论者才能将新邮件放入信箱，否则等待。请添加必要的信号量和P、V(或wait、signal)操作，以实现上述过程的同步。要求写出完整的
过程，并说明信号量的含义和初值。

- **实现**

```c
semaphore Full_A = x ;				//Fuu_A表示A的信箱中的邮件数量
semaphore Empty_A = M-x;			//Empty_A表示A的信箱中还可存放的邮件数量
semaphore Full_B = y ;				//Full_B表示B的信箱中的邮件数量
semaphore Empty_B = N-y;			//Empty_B表示B的信箱中还可存放的邮件数量
semaphore mutex_A = 1 ;				//mutex_A用于A的信箱互斥
semaphore mutex_B = 1 ;				//mutex_B用于B的信箱互斥
A{
	while(TRUE){
		P(Full_A);
		P(mutex_A);
		从 A 的信箱中取出一个邮件
		V(mutex_A);
		V(Empty_A);
		回答问题并提出一个新问题
		P(Empty_B);
		P(mutex_B);
		将新邮件放入 B 的信箱
		V(mutex_B);
		V(Full_B);
	}
}
B{
	while(TRUE){
		P(Full_B);
		P(mutex_B);
		从 B 的信箱中取出一个邮件
		V(mutex_B);
		V(Empty_B);
		回答问题并提出一个新问题
		P(Empty_A);
		P(mutex_A);
		将新邮件放入 A 的信箱
		V(mutex_A);
		V(Full_A);
	}
}
```

